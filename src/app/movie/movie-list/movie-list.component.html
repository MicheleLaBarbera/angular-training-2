<table class="table">
  <thead>
    <tr>
      <th>Titolo</th>
      <th>Anno</th>
      <th>Durata</th>
      <th>Genere</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let movie of movies">
      <td>{{movie.title}}</td>
      <td>{{movie.year}}</td>
      <td>{{movie.runtime}}</td>
      <td>{{movie.genres?.name}}</td>
      <td><button class="btn btn-warning" (click)="selectMovie(movie)">Modifica</button></td>
      <td><button class="btn btn-danger" (click)="deleteMovie(movie._id!)">Elimina</button></td>
    </tr>
  </tbody>
</table>

<div *ngIf="selectedMovie" class="mt-5">
  <form [formGroup]="moviePatchForm" (ngSubmit)="patchMovie()">
    <div class="form-floating mb-3">
      <input type="text" class="form-control" id="floatingTitle" placeholder="Titolo" formControlName="title">
      <label for="floatingTitle">Titolo</label>
    </div>
    <div class="form-floating mb-3">
      <input type="number" class="form-control" id="floatingYear" placeholder="Anno" formControlName="year">
      <label for="floatingYear">Anno</label>
    </div>
    <div class="form-floating mb-3">
      <input type="number" class="form-control" id="floatingRuntime" placeholder="Durata" formControlName="runtime">
      <label for="floatingRuntime">Durata</label>
    </div>
    <div class="form-floating mb-3">
      <select class="form-control" id="floatingGenre" placeholder="" formControlName="genres">
        <option *ngFor="let genre of genres" [ngValue]="genre">{{genre.name}}</option>
      </select>
      <label for="floatingGenre">Genere</label>
    </div>

    <div class="text-center">
      <button class="btn btn-primary" type="submit" [disabled]="!moviePatchForm.valid">Modifica</button>
    </div>
  </form>
</div>
